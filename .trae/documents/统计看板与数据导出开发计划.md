# 开发计划：统计看板与数据导出 (含客户分析)

非常好的建议！引入"客户维度"后，我们将能够识别出"重点客户"或"高频故障客户"，这对售后支持非常有价值。

我们将分两步走：先实现**统计看板**（包含客户分析），再实现**数据导出**。

## 1. 📊 统计看板开发 (Dashboard)

### 1.1 后端接口 (Backend)
我们需要聚合查询接口来支持前端图表。
*   **API**: `GET /api/stats`
*   **聚合维度**:
    1.  **Overview**: 总问题数、待处理数、今日新增。
    2.  **按机型 (By Model)**: 饼图/柱状图，看哪个机型故障最多。
    3.  **按故障现象 (By Phenomenon)**: 词云或列表，看主要是什么问题（漏水、不开机等）。
    4.  **按客户 (By Customer)**: **[新增]** Top 10 报修客户排行。
    5.  **趋势 (Trend)**: 最近 7 天/30 天的提交量折线图。

### 1.2 前端页面 (Frontend)
*   **新页面**: `Dashboard.tsx`
*   **可视化库**: 引入 `recharts` (轻量级 React 图表库) 来绘制图表。
*   **布局**:
    *   顶部：关键指标卡片 (KPI Cards)。
    *   中部：机型分布饼图 + 趋势折线图。
    *   底部：故障现象排行 + **客户报修排行**。

## 2. 🔍 高级搜索与筛选 (Search & Filter)
为了支持"看客户的分析"，列表页需要增强。
*   **列表页升级**: 增加筛选栏。
    *   支持按 **客户名称** 搜索。
    *   支持按 **机型** 筛选。
    *   支持按 **状态** 筛选。

## 3. 📥 数据导出 (Export)
*   **后端**: `GET /api/issues/export` (生成 CSV 流)。
*   **前端**: 在列表页增加"导出数据"按钮。

---

## 📅 执行步骤
1.  **后端**: 实现 `StatsService` 和 `/api/stats` 接口。
2.  **前端**: 安装 `recharts`，开发 `Dashboard` 页面。
3.  **前端**: 升级 `IssueList` 页面，增加筛选和导出功能。
