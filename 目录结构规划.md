# 项目目录结构规划 (前后端分离版)

采用 Monorepo 风格管理目录，但保持物理隔离。

## 根目录结构

```text
product-issue-collector/
├── frontend/                 # [前端] Vite + React
├── backend/                  # [后端] Node.js + Fastify + Prisma
├── data/                     # (开发用) 本地数据目录
│   └── db/                   # SQLite 数据库文件
├── .env                      # (可选) 根目录环境变量模板
└── README.md
```

## 1. `/backend` (后端服务)

纯粹的 API 服务，负责业务逻辑、数据库交互和文件处理。

```text
backend/
├── src/
│   ├── app.ts                # 应用入口 (Fastify 实例)
│   ├── config/               # 配置加载 (dotenv)
│   ├── controllers/          # 控制器 (处理请求参数)
│   │   ├── issue.controller.ts
│   │   └── upload.controller.ts
│   ├── routes/               # 路由定义
│   │   ├── index.ts
│   │   ├── issue.routes.ts
│   │   └── upload.routes.ts
│   ├── services/             # 业务逻辑 (调用 Prisma)
│   │   └── issue.service.ts
│   └── utils/                # 工具函数
│       ├── prisma.ts         # Prisma Client 单例
│       └── file-storage.ts   # 文件存储逻辑 (path.join 等)
│
├── prisma/                   # 数据库模型
│   ├── schema.prisma         # 数据表定义
│   └── migrations/           # 迁移记录
│
├── uploads/                  # (开发用) 默认上传目录，生产环境用绝对路径
├── package.json
└── tsconfig.json
```

## 2. `/frontend` (前端应用)

标准的 Vite + React SPA 应用。

```text
frontend/
├── src/
│   ├── assets/               # 静态资源
│   ├── components/           # 组件库
│   │   ├── ui/               # shadcn/ui 基础组件
│   │   ├── forms/            # 业务表单
│   │   └── ...
│   ├── hooks/                # 自定义 Hooks (useFetch 等)
│   ├── lib/                  # 工具库
│   │   ├── api.ts            # Axios 实例 (配置 baseURL)
│   │   └── utils.ts
│   ├── pages/                # 页面组件
│   │   ├── submit/           # 提交页
│   │   └── dashboard/        # 看板页
│   ├── App.tsx               # 路由配置 (React Router)
│   └── main.tsx              # 入口
│
├── public/
├── index.html
├── vite.config.ts
├── tailwind.config.js
└── package.json
```

## 部署模式

1.  **开发模式**：
    *   后端运行在 `:3000`
    *   前端运行在 `:5173` (配置 proxy 转发 `/api` 到 `:3000`)

2.  **生产模式 (最简)**：
    *   前端 `npm run build` -> 生成 `dist` 目录
    *   后端配置静态文件服务，指向前端 `dist`
    *   只启动后端一个 Node 进程，即可同时提供 API 和 页面服务
